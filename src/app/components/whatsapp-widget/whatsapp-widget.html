<!-- Botón flotante de WhatsApp -->
<div class="whatsapp-float-container" *ngIf="!isOpen">
  <div class="whatsapp-tooltip">
    <p>Quieres saber más <strong>escríbenos</strong></p>
  </div>
  <button class="whatsapp-float-button" (click)="toggleWidget()" aria-label="Abrir chat de WhatsApp">
    <svg viewBox="0 0 32 32" class="whatsapp-icon">
      <path fill="white" d="M16 0c-8.837 0-16 7.163-16 16 0 2.825 0.737 5.607 2.137 8.048l-2.137 7.952 7.933-2.127c2.42 1.37 5.173 2.127 8.067 2.127 8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 29.467c-2.482 0-4.908-0.646-7.07-1.87l-0.507-0.292-5.155 1.382 1.403-5.233-0.315-0.519c-1.268-2.154-1.939-4.62-1.939-7.168 0-7.467 6.075-13.533 13.533-13.533s13.533 6.075 13.533 13.533c0 7.467-6.075 13.533-13.533 13.533z"/>
      <path fill="white" d="M23.13 19.66c-0.37-0.186-2.189-1.083-2.528-1.205-0.339-0.122-0.586-0.186-0.833 0.186s-0.958 1.205-1.174 1.452c-0.216 0.247-0.432 0.278-0.802 0.093-0.37-0.186-1.562-0.576-2.974-1.835-1.099-0.982-1.841-2.195-2.057-2.565s-0.023-0.57 0.162-0.755c0.167-0.166 0.37-0.432 0.555-0.648 0.186-0.216 0.247-0.37 0.37-0.617s0.062-0.463-0.031-0.648c-0.093-0.186-0.833-2.005-1.141-2.747-0.301-0.724-0.607-0.625-0.833-0.637-0.216-0.010-0.463-0.012-0.709-0.012s-0.648 0.093-0.987 0.463c-0.339 0.37-1.296 1.267-1.296 3.095s1.327 3.588 1.512 3.833c0.186 0.247 2.593 3.963 6.283 5.553 0.877 0.379 1.562 0.606 2.096 0.775 0.881 0.279 1.682 0.24 2.316 0.146 0.707-0.105 2.189-0.895 2.497-1.759s0.308-1.605 0.216-1.759c-0.093-0.154-0.339-0.247-0.709-0.432z"/>
    </svg>
  </button>
</div>

<!-- Modal de WhatsApp -->
<div class="whatsapp-modal-overlay" *ngIf="isOpen" (click)="closeWidget()">
  <div class="whatsapp-modal" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="whatsapp-modal-header">
      <svg viewBox="0 0 32 32" class="whatsapp-header-icon">
        <path fill="white" d="M16 0c-8.837 0-16 7.163-16 16 0 2.825 0.737 5.607 2.137 8.048l-2.137 7.952 7.933-2.127c2.42 1.37 5.173 2.127 8.067 2.127 8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 29.467c-2.482 0-4.908-0.646-7.07-1.87l-0.507-0.292-5.155 1.382 1.403-5.233-0.315-0.519c-1.268-2.154-1.939-4.62-1.939-7.168 0-7.467 6.075-13.533 13.533-13.533s13.533 6.075 13.533 13.533c0 7.467-6.075 13.533-13.533 13.533z"/>
        <path fill="white" d="M23.13 19.66c-0.37-0.186-2.189-1.083-2.528-1.205-0.339-0.122-0.586-0.186-0.833 0.186s-0.958 1.205-1.174 1.452c-0.216 0.247-0.432 0.278-0.802 0.093-0.37-0.186-1.562-0.576-2.974-1.835-1.099-0.982-1.841-2.195-2.057-2.565s-0.023-0.57 0.162-0.755c0.167-0.166 0.37-0.432 0.555-0.648 0.186-0.216 0.247-0.37 0.37-0.617s0.062-0.463-0.031-0.648c-0.093-0.186-0.833-2.005-1.141-2.747-0.301-0.724-0.607-0.625-0.833-0.637-0.216-0.010-0.463-0.012-0.709-0.012s-0.648 0.093-0.987 0.463c-0.339 0.37-1.296 1.267-1.296 3.095s1.327 3.588 1.512 3.833c0.186 0.247 2.593 3.963 6.283 5.553 0.877 0.379 1.562 0.606 2.096 0.775 0.881 0.279 1.682 0.24 2.316 0.146 0.707-0.105 2.189-0.895 2.497-1.759s0.308-1.605 0.216-1.759c-0.093-0.154-0.339-0.247-0.709-0.432z"/>
      </svg>
      <div class="whatsapp-header-content">
        <h3>Solicita información</h3>
        <p>¡Hola! Haga clic en uno de nuestros miembros a continuación para chatear en <strong>WhatsApp</strong></p>
      </div>
    </div>

    <!-- Content -->
    <div class="whatsapp-modal-content">
      <p class="response-time">El equipo suele responder en unos minutos.</p>

      <!-- Contactos -->
      <div class="contact-list">
        <div class="contact-item" *ngFor="let contact of contacts" (click)="openWhatsApp(contact.phoneNumber)">
          <div class="contact-avatar">
            <svg viewBox="0 0 32 32" class="avatar-icon">
              <circle cx="16" cy="16" r="16" fill="#25D366"/>
              <path fill="white" d="M16 0c-8.837 0-16 7.163-16 16 0 2.825 0.737 5.607 2.137 8.048l-2.137 7.952 7.933-2.127c2.42 1.37 5.173 2.127 8.067 2.127 8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 29.467c-2.482 0-4.908-0.646-7.07-1.87l-0.507-0.292-5.155 1.382 1.403-5.233-0.315-0.519c-1.268-2.154-1.939-4.62-1.939-7.168 0-7.467 6.075-13.533 13.533-13.533s13.533 6.075 13.533 13.533c0 7.467-6.075 13.533-13.533 13.533z"/>
            </svg>
          </div>
          <div class="contact-info">
            <h4>{{ contact.name }}</h4>
            <p>{{ contact.subtitle }}</p>
          </div>
          <div class="contact-whatsapp-icon">
            <svg viewBox="0 0 32 32">
              <path fill="#25D366" d="M16 0c-8.837 0-16 7.163-16 16 0 2.825 0.737 5.607 2.137 8.048l-2.137 7.952 7.933-2.127c2.42 1.37 5.173 2.127 8.067 2.127 8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 29.467c-2.482 0-4.908-0.646-7.07-1.87l-0.507-0.292-5.155 1.382 1.403-5.233-0.315-0.519c-1.268-2.154-1.939-4.62-1.939-7.168 0-7.467 6.075-13.533 13.533-13.533s13.533 6.075 13.533 13.533c0 7.467-6.075 13.533-13.533 13.533z"/>
              <path fill="#25D366" d="M23.13 19.66c-0.37-0.186-2.189-1.083-2.528-1.205-0.339-0.122-0.586-0.186-0.833 0.186s-0.958 1.205-1.174 1.452c-0.216 0.247-0.432 0.278-0.802 0.093-0.37-0.186-1.562-0.576-2.974-1.835-1.099-0.982-1.841-2.195-2.057-2.565s-0.023-0.57 0.162-0.755c0.167-0.166 0.37-0.432 0.555-0.648 0.186-0.216 0.247-0.37 0.37-0.617s0.062-0.463-0.031-0.648c-0.093-0.186-0.833-2.005-1.141-2.747-0.301-0.724-0.607-0.625-0.833-0.637-0.216-0.010-0.463-0.012-0.709-0.012s-0.648 0.093-0.987 0.463c-0.339 0.37-1.296 1.267-1.296 3.095s1.327 3.588 1.512 3.833c0.186 0.247 2.593 3.963 6.283 5.553 0.877 0.379 1.562 0.606 2.096 0.775 0.881 0.279 1.682 0.24 2.316 0.146 0.707-0.105 2.189-0.895 2.497-1.759s0.308-1.605 0.216-1.759c-0.093-0.154-0.339-0.247-0.709-0.432z"/>
            </svg>
          </div>
        </div>
      </div>

      <!-- Footer con logo -->
      <div class="modal-footer">
        <div class="powered-by">
          <svg viewBox="0 0 90 90" class="footer-icon">
            <circle cx="45" cy="45" r="43" fill="#E0E0E0"/>
            <text x="45" y="60" text-anchor="middle" font-size="40" fill="#888">⚡</text>
          </svg>
        </div>
      </div>
    </div>

    <!-- Botón cerrar -->
    <button class="close-button" (click)="closeWidget()" aria-label="Cerrar chat">
      <svg viewBox="0 0 24 24" fill="white">
        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
      </svg>
    </button>
  </div>
</div>